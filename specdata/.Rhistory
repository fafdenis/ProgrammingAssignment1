nobs <- function(id) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Complete cases
num_com = selected.files[num_com(selected.files), ]
# Loop for threshold
if (num_com >= threshold) {
correlation <- c(correlation, cor(x,y))
correlation <- c(correlation, cor(selected.files$nitrate, selected.files$sulfate))
}
}
return(correlation)
}
# Loop for pollutant mean
pollutantmean <- function(directory, pollutant, id = 1:332) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Import data
data = lapply(file.path(path, selected.files), read.csv)
# Convert into data frame
data = do.call(rbind.data.frame, data)
# Calculate mean
mean(data[, pollutant], na.rm = TRUE)
}
# Loop for complete function
complete <- function(directory, id = 1:332) {
# Loop by id
nobs <- function(id) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Complete cases
return (sum(complete.cases(read.csv(selected.files))))
}
# Append complete cases to numeric vector
return (data.frame(id = id, nobs = sapply(id, nobs)))
}
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Empty vector to hold correlations
correlation <- numeric()
# Loop by id
nobs <- function(id) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Complete cases
num_com = selected.files[num_com(selected.files), ]
# Loop for threshold
if (num_com >= threshold) {
correlation <- c(correlation, cor(x,y))
correlation <- c(correlation, cor(selected.files$nitrate, selected.files$sulfate))
}
}
return(correlation)
}
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Empty vector to hold correlations
correlation <- numeric()
# Loop by id
nobs <- function(id) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Complete cases
num_com = (complete.cases(read.csv(selected.files))))
# Loop for threshold
if (num_com >= threshold) {
correlation <- c(correlation, cor(x,y))
correlation <- c(correlation, cor(selected.files$nitrate, selected.files$sulfate))
}
}
return(correlation)
}
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Empty vector to hold correlations
correlation <- numeric()
# Loop by id
nobs <- function(id) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Complete cases
num_com = (complete.cases(read.csv(selected.files))))
# Loop for threshold
if (num_com >= threshold) {
correlation <- c(correlation, cor(x,y))
correlation <- c(correlation, cor(selected.files$nitrate, selected.files$sulfate))
}
}
return(correlation)
}
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Empty vector to hold correlations
correlation <- numeric()
# Loop by id
for(i in id) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Import data
data = lapply(file.path(path, selected.files), read.csv)
# Complete cases
num_com = data[complete.cases(data), ]
# Loop for threshold
if (num_com >= threshold) {
correlation <- c(correlation, cor(x,y))
correlation <- c(correlation, cor(data$nitrate, data$sulfate))
}
}
return(correlation)
}
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Empty vector to hold correlations
correlation <- numeric()
# Loop by id
for(i in 1:332) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Import data
data = lapply(file.path(path, selected.files), read.csv)
# Complete cases
num_com = data[complete.cases(data), ]
# Loop for threshold
if (num_com >= threshold) {
correlation <- c(correlation, cor(x,y))
correlation <- c(correlation, cor(data$nitrate, data$sulfate))
}
}
return(correlation)
}
cr <- corr("specdata", 150)
corr("specdata", 150)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Empty vector to hold correlations
correlation <- numeric()
# Loop by id
for(id in 1:332) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Import data
data = lapply(file.path(path, selected.files), read.csv)
# Complete cases
num_com = data[complete.cases(data), ]
# Loop for threshold
if (num_com >= threshold) {
correlation <- c(correlation, cor(x,y))
correlation <- c(correlation, cor(data$nitrate, data$sulfate))
}
}
return(correlation)
}
corr("specdata", 150)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Import data
data = lapply(file.path(path, selected.files), read.csv)
# Convert into data frame
data = do.call(rbind.data.frame, data)
# Remove NAs and NaNs and save in new data frame
data = na.omit(data)
# Correlations
return (cor(data$sulfate, data$nitrate))
}
corr("specdata", 150)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Loop by id
correlation <- function(id) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Complete cases
complete = sum(complete.cases(read.csv(selected.files)))
}
# Correlations
return (cor(complete$sulfate, complete$nitrate))
}
corr("specdata", 150)
corr("specdata", 150)
corr <- function(directory, threshold = 0) {
# Set the path
directory = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Return a numeric vector of correlations
df = complete(directory)
ids = df[df["nobs"] > threshold, ]$id
corrr = numeric()
for (i in ids) {
newRead = read.csv(paste(directory, "/", formatC(i, width = 3, flag = "0"),
".csv", sep = ""))
dff = newRead[complete.cases(newRead), ]
corrr = c(corrr, cor(dff$sulfate, dff$nitrate))
}
return(corrr)
}
cr <- corr("specdata", 150)
head(cr)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
directory = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Return a numeric vector of correlations
comp_num = complete(directory)
id_full = comp_num[comp_num["nobs"] > threshold, ]$id
correlation = numeric()
for (i in id_full) {
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Return a numeric vector of correlations
comp_num = complete(directory)
id_full = comp_num[comp_num["nobs"] > threshold, ]$id
correlation = numeric()
for (i in id_full) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Get the file list in that directory
fileList = list.files(path)
# Extract the file names and store as numeric for comparison
file.names = as.numeric(sub("\\.csv$", "", fileList))
# Select files to be imported
selected.files = fileList[match(id, file.names)]
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
cr <- corr("specdata", 150)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
path = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Complete observations
comp_num = complete(directory)
# ID greater than threshold
id_full = comp_num[comp_num["nobs"] > threshold, ]$id
# Return a numeric vector of correlations
correlation = numeric()
for (i in id_full) {
# Import data
selected.files = read.csv(paste(directory, "/", formatC(i, width = 3, flag = "0"),
".csv", sep = ""))
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
cr <- corr("specdata", 150)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
directory = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Complete observations
comp_num = complete(directory)
# ID greater than threshold
id_full = comp_num[comp_num["nobs"] > threshold, ]$id
# Return a numeric vector of correlations
correlation = numeric()
for (i in id_full) {
# Import data
selected.files = read.csv(paste(directory, "/", formatC(i, width = 3, flag = "0"),
".csv", sep = ""))
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
cr <- corr("specdata", 150)
head(cr)
summary(cr)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
directory = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Complete observations
comp_num = complete(directory)
# ID greater than threshold
id_full = comp_num[comp_num["nobs"] > threshold, ]$id
# Return a numeric vector of correlations
correlation = numeric()
for (i in id_full) {
# Import data
selected.files = lapply(dir(), read.csv)
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
cr <- corr("specdata", 150)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
directory = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Complete observations
comp_obs = complete(directory)
# ID greater than threshold
id_full = comp_obs[comp_obs["nobs"] > threshold, ]$id
# Empty numeric vector to hold correlations
correlation = numeric()
# Loop for id with complete obsersations and greater than threshold
for (i in id_full) {
# Import data
selected.files = read.csv(paste
(directory, "/",
formatC(i, width = 3, flag = "0"),
".csv", sep = ""))
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
cr <- corr("specdata", 150)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
directory = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Complete observations
comp_obs = complete(directory)
# ID greater than threshold
id_full = comp_obs[comp_obs["nobs"] > threshold, ]$id
# Empty numeric vector to hold correlations
correlation = numeric()
# Loop for id with complete obsersations and greater than threshold
for (i in id_full) {
# Import data
selected.files = read.csv(paste(directory, "/", formatC(i, width = 3, flag = "0"),
".csv", sep = ""))
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
cr <- corr("specdata", 150)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
directory = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Complete observations
comp_num = complete(directory)
# ID greater than threshold
id_full = comp_num[comp_num["nobs"] > threshold, ]$id
# Return a numeric vector of correlations
correlation = numeric()
for (i in id_full) {
# Import data
selected.files = read.csv(paste
(directory, "/",
formatC(i, width = 3, flag = "0"),
".csv", sep = ""))
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
cr <- corr("specdata", 150)
head(cr)
summary(cr)
# Loop for correlation function
corr <- function(directory, threshold = 0) {
# Set the path
directory = "/Users/sdenis/Desktop/Rprogramming/specdata"
# Complete observations
comp_obs = complete(directory)
# ID greater than threshold
id_full = comp_obs[comp_obs["nobs"] > threshold, ]$id
# Empty numeric vector to hold correlations
correlation = numeric()
for (i in id_full) {
# Import data
selected.files = read.csv(paste
(directory, "/",
formatC(i, width = 3, flag = "0"),
".csv", sep = ""))
# Complete cases
data = selected.files[complete.cases(selected.files), ]
# Correlate pollutants
correlation = c(correlation, cor(data$sulfate, data$nitrate))
}
return(correlation)
}
cr <- corr("specdata", 150)
head(cr)
summary(cr)
cr <- corr("specdata", 400)
head(cr)
summary(cr)
cr <- corr("specdata", 5000)
summary(cr)
length(cr)
cr <- corr("specdata")
summary(cr)
length(cr)
source("pollutantmean.R")
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean("specdata", "sulfate", 34)
pollutantmean("specdata", "nitrate")
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- complete("specdata", 54)
print(cc$nobs)
set.seed(42)
cc <- complete("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
cr <- corr("specdata")
cr <- sort(cr)
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
cr <- corr("specdata", 2000)
n <- length(cr)
cr <- corr("specdata", 1000)
cr <- sort(cr)
print(c(n, round(cr, 4)))
